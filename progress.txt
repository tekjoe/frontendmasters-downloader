# Progress Log
Run: 33fb3bea-dfc5-4ce0-b829-12ec0a7a7844
Task: Build Frontend Masters video downloader
Started: 2026-02-11

## Codebase Patterns
- ES modules ("type": "module" in package.json)
- Use fs-extra for enhanced file operations
- Node.js built-in test runner (node --test)
- Tests live in test/ directory with .test.js suffix

---

## 2026-02-11 10:45 AM - US-001: Create utils.js with helper functions
- Created src/utils.js with 5 helper functions:
  - slugify(): converts strings to URL-friendly slugs
  - sanitizeFilename(): removes illegal chars from filenames  
  - loadConfig(): reads config/credentials.json
  - ensureDir(): creates directories recursively
  - formatDuration(): formats seconds to HH:MM:SS
- Created test/utils.test.js with 14 test cases covering main and edge cases
- Created config/credentials.json template
- **Learnings:** Project uses ES modules, Node.js built-in test runner works well

---

## 2026-02-11 12:19 PM - US-003: Create extractor.js for M3U8 URL extraction
- Created src/extractor.js with three main functions:
  - `extractCourseSlug(courseUrl)` - Extracts course slug from URL for directory naming
  - `extractCourseData(page, courseUrl)` - Navigates course pages, extracts lesson metadata, captures M3U8 URLs via Puppeteer request interception, returns array of lesson objects
  - `getCourseMetadata(page, courseUrl)` - Gets course title and lesson count
- M3U8 URL extraction uses Puppeteer request interception to capture playlist URLs
- Filters for 1080p quality (prefers URLs containing '1080' or 'index_0_av')
- Returns lesson objects with {number, title, m3u8Url, duration} properties
- Created test/extractor.test.js with comprehensive tests (16 tests covering slug extraction, validation, edge cases)
- **Learnings:** Request interception must be enabled before navigation; using page.on/off pattern for proper cleanup; Puppeteer can intercept network requests to capture media URLs

---
